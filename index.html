<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sentiment Analysis</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="container">
      <h1 class="title">Sentiment Analysis</h1>

      <div class="buttons">
        <button id="load">Load Model</button>
        <button id="run">Run Model</button>
      </div>

      <div class="input-group">
        <span>Input Text:</span>
        <input
          type="text"
          name="input_box"
          id="input_box"
          placeholder="Enter text here..."
        />
      </div>

      <div class="output-group">
        <span>Output Text:</span>
        <input type="text" name="output_box" id="output_box" readonly />
      </div>
    </div>

    <script type="module">
      import { pipeline } from "https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.0.0";

      document.querySelector("#load").addEventListener("click", () => {
        loadModel();
      });

      document.querySelector("#run").addEventListener("click", () => {
        runModel();
      });

      let classifier;

      const loadModel = async () => {
        const loadButton = document.querySelector("#load");
        loadButton.textContent = "Loading...";
        loadButton.disabled = true;

        try {
          classifier = await pipeline("sentiment-analysis");
          loadButton.textContent = "Model Loaded!";
          loadButton.style.backgroundColor = "#2196F3";
        } catch (error) {
          loadButton.textContent = "Load Failed";
          loadButton.style.backgroundColor = "#f44336";
        }
      };

      const runModel = async () => {
        if (!classifier) {
          alert("Please load the model first!");
          return;
        }

        const inputText = document.querySelector("#input_box").value;
        if (!inputText.trim()) {
          alert("Please enter some text!");
          return;
        }

        try {
          let result = await classifier(inputText);
          document.querySelector("#output_box").value = result[0].label;
        } catch (error) {
          document.querySelector("#output_box").value = "Error occurred";
        }
      };

      let inputText = "I love transformers!";
      document.querySelector("#input_box").value = inputText;
      document.querySelector("#input_box").addEventListener("input", (e) => {
        inputText = e.target.value;
      });
    </script>
  </body>
</html>
